<div class="store-settings-container">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
      <div class="header-content">
        <div class="header-icon">
          <mat-icon>store</mat-icon>
        </div>
        <div class="header-text">
          <h1>Store Settings</h1>
          <p>Configure your store information and preferences</p>
        </div>
      </div>
    </div>
  
    <!-- Main Dashboard Content -->
    <div class="dashboard-content">
      <form [formGroup]="storeForm" (ngSubmit)="onSubmit()">
  
        <!-- Left Column (Main Content) -->
        <div class="form-left">
          
          <!-- Store Information Card -->
          <mat-card class="primary-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>business</mat-icon>
                Store Information
              </mat-card-title>
              <mat-card-subtitle>Basic details about your store</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Store Name</mat-label>
                <input matInput formControlName="name" placeholder="Enter your store name">
                <mat-icon matSuffix>storefront</mat-icon>
              </mat-form-field>
  
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description" 
                          placeholder="Describe what makes your store special..." 
                          rows="4"></textarea>
                <mat-icon matSuffix>description</mat-icon>
              </mat-form-field>
  
              <div class="form-row">
                <mat-form-field appearance="outline" class="form-field">
                  <mat-label>Email</mat-label>
                  <input matInput formControlName="email" type="email" 
                         placeholder="store@example.com">
                  <mat-icon matSuffix>email</mat-icon>
                </mat-form-field>
  
                <mat-form-field appearance="outline" class="form-field">
                  <mat-label>Phone Number</mat-label>
                  <input matInput formControlName="phoneNumber" 
                         placeholder="+1 (555) 123-4567">
                  <mat-icon matSuffix>phone</mat-icon>
                </mat-form-field>
              </div>
            </mat-card-content>
          </mat-card>
  
          <!-- Address Card -->
          <mat-card>
            <mat-card-header>
              <mat-card-title>
                <mat-icon>location_on</mat-icon>
                Store Address
              </mat-card-title>
              <mat-card-subtitle>Physical location details</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content formGroupName="address">
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Street Address</mat-label>
                <input matInput formControlName="street" 
                       placeholder="123 Main Street">
                <mat-icon matSuffix>home</mat-icon>
              </mat-form-field>
  
              <div class="form-row">
                <mat-form-field appearance="outline" class="form-field">
                  <mat-label>City</mat-label>
                  <input matInput formControlName="city" placeholder="New York">
                  <mat-icon matSuffix>location_city</mat-icon>
                </mat-form-field>
  
                <mat-form-field appearance="outline" class="form-field">
                  <mat-label>Postal Code</mat-label>
                  <input matInput formControlName="postalCode" placeholder="10001">
                  <mat-icon matSuffix>markunread_mailbox</mat-icon>
                </mat-form-field>
              </div>
  
              <div class="form-row">
                <mat-form-field appearance="outline" class="form-field">
                  <mat-label>Country</mat-label>
                  <input matInput formControlName="country" placeholder="United States">
                  <mat-icon matSuffix>public</mat-icon>
                </mat-form-field>
  
                <mat-form-field appearance="outline" class="form-field">
                  <mat-label>Address Label</mat-label>
                  <input matInput formControlName="label" 
                         placeholder="Main Store, Headquarters, etc.">
                  <mat-icon matSuffix>label</mat-icon>
                </mat-form-field>
              </div>
            </mat-card-content>
          </mat-card>
  
          <!-- Categories & Tags Card -->
          <mat-card class="secondary-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>category</mat-icon>
                Categories & Classification
              </mat-card-title>
              <mat-card-subtitle>Organize your store with tags and categories</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Category IDs</mat-label>
                <input matInput formControlName="categoryIds" 
                       placeholder="1, 2, 3, 4">
                <mat-icon matSuffix>list</mat-icon>
                <mat-hint>Enter comma-separated category IDs</mat-hint>
              </mat-form-field>
  
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Tags</mat-label>
                <input matInput formControlName="tags" 
                       placeholder="organic, fresh, local, premium">
                <mat-icon matSuffix>local_offer</mat-icon>
                <mat-hint>Enter comma-separated tags</mat-hint>
              </mat-form-field>
  
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Store Types</mat-label>
                <input matInput formControlName="storeTypes" 
                       placeholder="grocery, restaurant, retail">
                <mat-icon matSuffix>store</mat-icon>
                <mat-hint>Enter comma-separated store types</mat-hint>
              </mat-form-field>
  
              <div class="info-hint">
                <mat-icon>info</mat-icon>
                <span>Use descriptive tags to help customers find your store more easily</span>
              </div>
            </mat-card-content>
          </mat-card>
  
          <!-- Delivery Pricing Card -->
          <mat-card class="tertiary-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>local_shipping</mat-icon>
                Delivery Pricing
              </mat-card-title>
              <mat-card-subtitle>Configure delivery fees based on order weight</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content formArrayName="deliveryPricing">
              <div class="delivery-pricing-section">
                <div *ngFor="let item of deliveryPricing.controls; let i = index" 
                     [formGroupName]="i" class="delivery-item">
                  <mat-form-field appearance="outline">
                    <mat-label>Max Weight (kg)</mat-label>
                    <input matInput type="number" formControlName="maxWeight" 
                           placeholder="5.0" min="0.1" step="0.1">
                    <mat-icon matSuffix>scale</mat-icon>
                  </mat-form-field>
  
                  <mat-form-field appearance="outline">
                    <mat-label>Delivery Fee ($)</mat-label>
                    <input matInput type="number" formControlName="fee" 
                           placeholder="5.99" min="0" step="0.01">
                    <mat-icon matSuffix>attach_money</mat-icon>
                  </mat-form-field>
  
                  <button mat-icon-button 
                          class="remove-delivery-button"
                          type="button" 
                          (click)="removeDeliveryPrice(i)"
                          [disabled]="deliveryPricing.length === 1"
                          matTooltip="Remove this pricing tier">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
  
                <button mat-stroked-button 
                        class="add-delivery-button"
                        type="button" 
                        (click)="addDeliveryPrice()">
                  <mat-icon>add</mat-icon>
                  Add Pricing Tier
                </button>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
  
        <!-- Right Column (Sidebar) -->
        <div class="form-right">
          
          <!-- Images Upload Card -->
          <mat-card>
            <mat-card-header>
              <mat-card-title>
                <mat-icon>image</mat-icon>
                Store Images
              </mat-card-title>
              <mat-card-subtitle>Upload your store's visual branding</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <!-- Cover Image Upload -->
              <div class="image-upload">
                <div class="image-upload-content">
                  <div class="image-upload-label">Cover Image</div>
                  <div class="image-upload-hint">Recommended: 1200x600px, Max 5MB</div>
                  <button mat-raised-button 
                          class="upload-button"
                          type="button" 
                          (click)="triggerFileInput('cover')">
                    <mat-icon>upload</mat-icon>
                    Choose Cover
                  </button>
                </div>
                <img *ngIf="coverPreview" 
                     [src]="coverPreview" 
                     class="preview-image"
                     alt="Cover preview">
                <input #coverUpload 
                       type="file" 
                       accept="image/*" 
                       (change)="onFileSelected($event, 'cover')" 
                       hidden>
              </div>
  
              <!-- Logo Upload -->
              <div class="image-upload">
                <div class="image-upload-content">
                  <div class="image-upload-label">Logo Image</div>
                  <div class="image-upload-hint">Recommended: 400x400px, Max 2MB</div>
                  <button mat-raised-button 
                          class="upload-button"
                          type="button" 
                          (click)="triggerFileInput('logo')">
                    <mat-icon>upload</mat-icon>
                    Choose Logo
                  </button>
                </div>
                <img *ngIf="logoPreview" 
                     [src]="logoPreview" 
                     class="preview-image"
                     alt="Logo preview">
                <input #logoUpload 
                       type="file" 
                       accept="image/*" 
                       (change)="onFileSelected($event, 'logo')" 
                       hidden>
              </div>
            </mat-card-content>
          </mat-card>
  
          <!-- Order Settings Card -->
          <mat-card>
            <mat-card-header>
              <mat-card-title>
                <mat-icon>shopping_cart</mat-icon>
                Order Settings
              </mat-card-title>
              <mat-card-subtitle>Configure order and delivery preferences</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Free Delivery Threshold ($)</mat-label>
                <input matInput type="number" formControlName="freeDeliveryOver" 
                       placeholder="50.00" min="0" step="0.01">
                <mat-icon matSuffix>local_shipping</mat-icon>
                <mat-hint>Orders above this amount get free delivery</mat-hint>
              </mat-form-field>
  
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Minimum Order Amount ($)</mat-label>
                <input matInput type="number" formControlName="minimumOrderAmount" 
                       placeholder="15.00" min="0" step="0.01">
                <mat-icon matSuffix>shopping_basket</mat-icon>
                <mat-hint>Minimum amount required for orders</mat-hint>
              </mat-form-field>
  
              <!-- Store Status Toggle -->
              <div class="checkbox-container">
                <mat-checkbox formControlName="isOpen" class="store-status-toggle">
                  <span class="checkbox-label">
                    <mat-icon>{{ storeForm.get('isOpen')?.value ? 'store' : 'store_mall_directory' }}</mat-icon>
                    Store is Currently {{ storeForm.get('isOpen')?.value ? 'Open' : 'Closed' }}
                  </span>
                </mat-checkbox>
                <div class="checkbox-hint">
                  Toggle to control whether customers can place orders
                </div>
              </div>
  
              <div class="info-hint">
                <mat-icon>lightbulb</mat-icon>
                <span>Setting competitive delivery thresholds can increase average order values</span>
              </div>
            </mat-card-content>
          </mat-card>
  
          <!-- Quick Stats Card (Optional) -->
          <mat-card class="stats-card" *ngIf="currentStore">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>analytics</mat-icon>
                Quick Stats
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="stat-item">
                <div class="stat-icon">
                  <mat-icon>schedule</mat-icon>
                </div>
                <div class="stat-details">
                  <div class="stat-label">Last Updated</div>
                  <div class="stat-value">{{ getCurrentDate() | date:'mediumDate' }}</div>
                </div>
              </div>
              
              <div class="stat-item">
                <div class="stat-icon">
                  <mat-icon>{{ storeForm.get('isOpen')?.value ? 'check_circle' : 'cancel' }}</mat-icon>
                </div>
                <div class="stat-details">
                  <div class="stat-label">Store Status</div>
                  <div class="stat-value">{{ storeForm.get('isOpen')?.value ? 'Active' : 'Closed' }}</div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
  
        <!-- Form Actions -->
        <div class="form-actions">
         <!--  <button mat-button 
                  type="button"
                  (click)="resetForm()"
                  [disabled]="loading">
            <mat-icon>refresh</mat-icon>
            Reset
          </button> -->
          
          <button mat-raised-button 
                  class="save-button"
                  color="primary" 
                  type="submit" 
                  [disabled]="loading || storeForm.invalid">
            <div class="button-content">
              <mat-spinner *ngIf="loading" diameter="16" class="button-loading"></mat-spinner>
              <mat-icon *ngIf="!loading">save</mat-icon>
              <span>{{ loading ? 'Saving...' : 'Save Changes' }}</span>
            </div>
          </button>
        </div>
  
      </form>
  
      <!-- Loading Overlay -->
      <div class="loading-overlay" *ngIf="loading">
        <div class="loading-spinner">
          <mat-spinner diameter="40"></mat-spinner>
          <p>Updating store settings...</p>
        </div>
      </div>
    </div>
  </div>